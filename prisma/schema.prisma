// Update the Commission model in the existing schema
model Commission {
  id            String    @id @default(cuid())
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt
  
  // Commission amounts
  amount        Decimal   // Amount agent receives (95% of their commission)
  greiaAmount   Decimal   // Amount GREIA receives (5% of agent's commission)
  totalAmount   Decimal   // Total commission amount (100% of agent's commission)
  
  // Status tracking
  status        CommissionStatus @default(PENDING)
  dueDate       DateTime
  paidDate      DateTime?
  
  // Transaction details
  stripePaymentId String?
  transactionRef  String?
  
  // Related records
  agent         User      @relation("AgentCommissions", fields: [agentId], references: [id])
  agentId       String
  listing       Listing   @relation(fields: [listingId], references: [id])
  listingId     String
  inquiry       ListingEnquiry @relation(fields: [inquiryId], references: [id])
  inquiryId     String    @unique

  // Metadata for commission calculations
  metadata      Json      // Stores rates and original price information
  notes         String?   @db.Text

  @@index([agentId])
  @@index([listingId])
  @@index([status])
}